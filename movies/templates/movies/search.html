{% extends "base.html" %}

{% block content %}
<h2>Movie Search</h2>

<form method="GET" action="{% url 'movie_search' %}">
    <input type="text" name="q" placeholder="Search for a movie..." value="{{ query|default:'' }}" required>
    <button type="submit">üîç Search</button>
</form>

{% if error_message %}
    <p style="color:red">{{ error_message }}</p>
{% endif %}

{% if results %}
    <ul class="flex flex-wrap gap-4">
        {% for movie in results %}
            <li class="w-48 border rounded p-2">
                <strong>{{ movie.title }}</strong>
                {% if movie.release_date %}({{ movie.release_date }}){% endif %}
                <p>{{ movie.overview|default:"No description available."|truncatechars:100 }}</p>
                {% if movie.poster_path %}
                    <img class="w-full rounded" src="https://image.tmdb.org/t/p/w200{{ movie.poster_path }}" alt="{{ movie.title }}">
                {% endif %}
            </li>
        {% endfor %}
    </ul>
{% endif %}
{% endblock %}
