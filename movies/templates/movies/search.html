{% extends "base.html" %}

{% block content %}
<h2>Movie Search</h2>

<form method="GET" action="{% url 'movie_search' %}">
    <input type="text" name="q" placeholder="Search for a movie..." value="{{ query|default:'' }}" required>
    <button type="submit">üîç Search</button>
</form>

{% if error_message %}
    <p style="color:red">{{ error_message }}</p>
{% endif %}

{% if results %}
  <ul>
    {% for movie in results %}
      <li>
        <strong>{{ movie.title }}</strong> ({{ movie.release_date }})
        <p>{{ movie.overview|truncatechars:150 }}</p>
        <img src="https://image.tmdb.org/t/p/w200{{ movie.poster_path }}" alt="{{ movie.title }}">
        <br>
        <a href="{% url 'movie_detail' movie.id %}">Read More & Reviews</a>
      </li>
    {% endfor %}
  </ul>
{% elif request.GET.q %}
  <p>No results found.</p>
{% endif %}
{% endblock %}
