{% extends "base.html" %}

{% block content %}
<h2>Movie Search</h2>

<form method="GET" action="{% url 'movie_search' %}">
    <input type="text" name="q" placeholder="Search for a movie..." value="{{ query|default:'' }}" required>
    <button type="submit">üîç Search</button>
</form>

{% if request_url %}
    <p><strong>Debug:</strong> API Request URL: {{ request_url }}</p>
    <p>Status code: {{ status_code }}</p>
{% endif %}

{% if error_message %}
    <p style="color:red">{{ error_message }}</p>
{% endif %}

{% if results %}
    <ul>
        {% for movie in results %}
            <li>
                <strong>{{ movie.title }}</strong>
                {% if movie.release_date %}({{ movie.release_date }}){% endif %}
                <p>{{ movie.overview|default:"No description available."|truncatechars:150 }}</p>
                {% if movie.poster_path %}
                    <img src="https://image.tmdb.org/t/p/w200{{ movie.poster_path }}" alt="{{ movie.title }}">
                {% endif %}
            </li>
        {% endfor %}
    </ul>
{% endif %}
{% endblock %}
