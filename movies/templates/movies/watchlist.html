{% extends "base.html" %}
{% block content %}
<section class="watchlist-section">
  <h2 class="page-title">üé¨ My Watchlist</h2>

  {% if entries %}
    <div class="watchlist-grid">
      {% for entry in entries %}
        <div class="movie-card">
          <!-- Movie Poster -->
          {% if entry.movie.poster %}
            <img
              src="{{ entry.movie.poster.url }}"
              alt="{{ entry.movie.title }} poster"
              class="movie-poster"
            />
          {% elif entry.movie.poster_path %}
            <img
              src="https://image.tmdb.org/t/p/w300{{ entry.movie.poster_path }}"
              alt="{{ entry.movie.title }} poster"
              class="movie-poster"
            />
          {% else %}
            <div class="movie-poster placeholder">No Poster</div>
          {% endif %}

          <!-- Card Body -->
          <div class="movie-info">
            <h3 class="movie-title">{{ entry.movie.title }}</h3>

            {% if entry.movie.release_year %}
              <p class="movie-year">({{ entry.movie.release_year }})</p>
            {% elif entry.movie.release_date %}
              <p class="movie-year">({{ entry.movie.release_date|slice:":4" }})</p>
            {% endif %}

            <p class="movie-status">
              Watched: <span class="status-icon">{{ entry.watched|yesno:"‚úÖ,‚ùå" }}</span>
            </p>

            <div class="button-group">
              {% if entry.movie.tmdb_id %}
                <a href="{% url 'toggle_watched_tmdb' entry.movie.tmdb_id %}" class="btn-watch">Toggle Watched</a>
                <a href="{% url 'remove_from_watchlist_tmdb' entry.movie.tmdb_id %}" class="btn-remove">Remove</a>
              {% else %}
                <a href="{% url 'toggle_watched_local' entry.movie.id %}" class="btn-watch">Toggle Watched</a>
                <a href="{% url 'remove_from_watchlist_local' entry.movie.id %}" class="btn-remove">Remove</a>
              {% endif %}
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="empty-watchlist">
      <p>Your watchlist is empty.</p>
    </div>
  {% endif %}
</section>
{% endblock %}
